{% extends 'base.html' %}
{% load home_extras %}
{% load static %}

{% block title %}{{ user.first_name }}'s profile{% endblock %}
{% block og-title %}Programming Discord Server: {{ user.first_name }}'s profile{% endblock %}
{% block og-type %}profile{% endblock %}
{% block og-description %}
  {{ user.first_name }} has been a registered user on this website since {{ user.date_joined|date }}.
  Visit their profile to learn more about them.
{% endblock %}

{% block head %}
  <meta property="og:profile:username" content="{{ user.first_name }}">
  <link rel="stylesheet" type="text/css" href="{% static 'profiles/css/user_detail.css' %}">
{% endblock %}

{% block body %}
  <br>
  {# <img src="{{ user.get_avatar_url }}"> #}
  <h1>{{ user.first_name }}<span class="muted">#{{ user.last_name }}</span></h1>
  {% for role_membership in discord_role_membership %}
    {% with role_membership.role as role %}
      {% if forloop.first %}
        {# Is there a nice way to display these on mobile? #}
        <div class="row hide-sm">
      {% endif %}
      <span class="col label outline role-label"
            style="border-color:{{ role.color|int_to_css_colour }};
                   background-color:{{ role.color|int_to_css_rgba }}">
        {{ role.name }}
      </span>
      {% if forloop.last %}
        </div>
      {% endif %}
    {% endwith %}
  {% endfor %}
  <br>
  <p>
    {{ user.first_name }} has been a registered user on this website since {{ user.date_joined|date }}.
  </p>
  {% for guide in user.guide_set.all %}
    {% if forloop.first %}
      <hr>
      <h3>Guides written by {{ user.first_name }}</h3>
      <ul>
    {% endif %}
    <li>
      <strong>
        <a class="no-underline" href="{% url 'guides:detail' guide.id %}">
          {{ guide.title }}
        </a>
      </strong>
      <span class="muted"> published on {{ guide.pub_datetime|date }}</span>
    </li>
    {% if forloop.last %}
      </ul>
    {% endif %}
  {% endfor %}
  {% if user.restrictprocessing.restrict_processing %}
    <br>
    <i class="muted">
      You currently have <strong>Restrict Processing</strong>
      enabled, and your profile is only visible to you.
    </i>
  {% endif %}
{% endblock %}
