{% extends 'base.html' %}
{% load static %}

{% block og-title %}Guide: {{ guide.title }}{% endblock %}
{% block og-description %}{{ guide.overview }}{% endblock %}
{% block og-type %}article{% endblock %}
{% block head %}
  <link rel="stylesheet" type="text/css" href="{% static 'guides/css/codehilite.min.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'guides/css/guide_detail.css' %}" />
  <meta property="article:published_time" content="{{ guide.pub_datetime }}">
  <meta property="article:modified_time" content="{{ guide.edit_datetime }}">
  <meta property="article:author:username" content="{{ guide.author.first_name }}">
  <meta property="article:section" content="Programming">
  {# <meta property="article:tag" content=... #}
{% endblock %}

{% block body %}
  <br>
  <h2 class="guide-title">{{ guide.title }}</h2>
  <div class="author-info row">
    {# <img class="small author-image" src="{{ author_discord.avatar_url }}"> #}
    <div class="col">
      <cite class="h5">
        written by<a class="strong no-underline" href="{% url 'profiles:detail' guide.author.id %}">
          @{{ guide.author.first_name }}
        </a>
        {% for editor in guide.editors.objects %}
          {% if forloop.first %}
            , edited by
          {% endif %}
          {% if forloop.last %}
            and
          {% endif %}
          <a class="no-underline" href="{% url 'profiles:detail' editor.id %}">
            @{{ editor.first_name }}
          </a>
          {% if not forloop.last %}
            ,
          {% endif %}
        {% endfor %}
        on {{ guide.pub_datetime|date }}
      </cite>
    </div>
    {% with guide.editors.all as editors %}
      {% if guide.author == request.user or is_admin or request.user in editors %}
        <div class="col push-right">
          <a href="{% url 'guides:edit' guide.id %}" style="color:deepskyblue;text-decoration:none;">&#128394;</a>
          {% if request.user not in editors %}
            <a href="{% url 'guides:delete' guide.id %}" class="h3" style="color:red;text-decoration:none;">&times;</a>
          {% endif %}
        </div>
      {% endif %}
    {% endwith %}
  </div>
  <hr>
  <article>
    {{ guide.content }}
  </article>
  <br>
  <i class="muted">Want to talk to <strong>{{ guide.author.first_name }}</strong> about this article? Come <a href="https://discord.gg/010z0Kw1A9ql5c1Qe">join us</a>!</i>
{% endblock %}
